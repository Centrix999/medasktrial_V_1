{% load static %} 
{% load widget_tweaks %} 
{% include 'admin/common/header.html'%} 
{% include 'admin/common/navbar.html' %}

<div class="toolbar py-5 pb-lg-15" id="kt_toolbar">
  <!--begin::Container-->
  <div id="kt_toolbar_container"
    class="container-xxl d-flex flex-stack flex-wrap">
    <!--begin::Page title-->
    <div class="page-title d-flex flex-column me-3">
      <!--begin::Title-->
      <h1 class="d-flex text-white fw-bold my-1 fs-3">Edit Document</h1>
      <!--end::Title-->
      <!--begin::Breadcrumb-->
      <ul class="breadcrumb breadcrumb-separatorless fw-semibold fs-7 my-1">
        <!--begin::Item-->
        <li class="breadcrumb-item text-white opacity-75">
          <a
            href="{% url 'admin_dashboard' %}"
            class="text-white text-hover-primary"
            >Dashboard</a
          >
        </li>
        <!--end::Item-->
        <!--begin::Item-->
        <li class="breadcrumb-item">
          <span class="bullet bg-white opacity-75 w-5px h-2px"></span>
        </li>
        <!--end::Item-->
        <!--begin::Item-->
        <li class="breadcrumb-item text-white opacity-75">Edit Document</li>
        <!--end::Item-->
      </ul>
      <!--end::Breadcrumb-->
    </div>
    <!--end::Page title-->
  </div>
  <!--end::Container-->
</div>

<div
  id="kt_content_container"
  class="d-flex flex-column-fluid align-items-start container-xxl"
>
  <!--begin::Post-->
  <div class="content flex-row-fluid" id="kt_content">
    <!--begin::Layout-->
    <div class="d-flex flex-column flex-lg-row">
      <!--begin::Content-->
      <div class="flex-lg-row-fluid me-lg-15 order-2 order-lg-1 mb-10 mb-lg-0">
        <!--begin::Form-->
        <form id="new_upload_form" class="form" method="post" enctype="multipart/form-data">
         
          <!--begin::Card-->
          <div class="card card-flush pt-3 mb-5 mb-lg-10">
            <!--begin::Card header-->
            <div class="card-header">
              <!--begin::Card title-->
              <div class="card-title">
                <h2 class="fw-bold">Edit Document</h2>
              </div>
              <!--begin::Card title-->
            </div>
            <!--end::Card header-->
            <!--begin::Card body-->
            <div class="card-body pt-0">
              <!--begin::Custom fields-->
              <div class="d-flex flex-column mb-15 fv-row">
              
                <div class="fv-row mb-6 fv-plugins-icon-container">
          
      
          <!--begin::Input group-->
          <div class="d-flex flex-column mb-8 fv-row">
            {% csrf_token %}
            
            {% if errors %}
             
              <!--begin::Alert-->
            <div class="alert alert-danger d-flex align-items-center p-5">
                <!--begin::Icon-->
                <i class="ki-duotone ki-shield-tick fs-2hx text-danger me-4"><span class="path1"></span><span class="path2"></span></i>
                <!--end::Icon-->
                <!--begin::Wrapper-->
                <div class="d-flex flex-column">
                    <!--begin::Title-->
                    <h4 class="mb-1 text-dark">Error</h4>
                    <!--end::Title-->
                    {% for error in errors %}
                    <!--begin::Content-->
                    <span>{{ error }}</span>
                    {% endfor %}
                    <!--end::Content-->
                </div>
                <!--end::Wrapper-->
            </div>
            <!--end::Alert-->           
             
           
            {% endif %}
            <!--begin::Label-->
            <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
              <span class="required">Name</span>
              <span
                class="ms-1"
                data-bs-toggle="tooltip"
                title="Specify related name"
              >
                <i class="ki-duotone ki-information-5 text-gray-500 fs-6">
                  <span class="path1"></span>
                  <span class="path2"></span>
                  <span class="path3"></span>
                </i>
              </span>
            </label>
            <!--end::Label-->
            {% render_field form.name class="form-control form-control-solid" placeholder="Enter name" %}
          </div>
          <!--end::Input group-->
          <!--begin::Input group-->
          <div class="d-flex flex-column mb-8 fv-row">
            <!--begin::Label-->
            <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
              <span class="required">Title</span>
              <span
                class="ms-1"
                data-bs-toggle="tooltip"
                title="Specify related title"
              >
                <i class="ki-duotone ki-information-5 text-gray-500 fs-6">
                  <span class="path1"></span>
                  <span class="path2"></span>
                  <span class="path3"></span>
                </i>
              </span>
            </label>
            <!--end::Label-->
            {% render_field form.title class="form-control form-control-solid" placeholder="Enter title" %}
          </div>
          <div class="d-flex flex-column mb-8 fv-row">
            <!--begin::Label-->
            <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
              <span class="required">File</span>
              <span
                class="ms-1"
                data-bs-toggle="tooltip"
                title="Upload related file, only .pdf, .doc, .docx files are allowed."
              >
                <i class="ki-duotone ki-information-5 text-gray-500 fs-6">
                  <span class="path1"></span>
                  <span class="path2"></span>
                  <span class="path3"></span>
                </i>
              </span>
            </label>
            <!--end::Label-->
            {% render_field form.file class="form-control form-control-solid" %}
          </div>
          <!--end::Input group-->
          <div class="d-flex flex-column mb-8 fv-row">
            <!--begin::Label-->
            <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
              <span class="required">Image</span>
              <span
                class="ms-1"
                data-bs-toggle="tooltip"
                title="Upload related image"
              >
                <i class="ki-duotone ki-information-5 text-gray-500 fs-6">
                  <span class="path1"></span>
                  <span class="path2"></span>
                  <span class="path3"></span>
                </i>
              </span>
            </label>
            <!--end::Label-->
            {% render_field form.image class="form-control form-control-solid" %}
          </div>
          <div class="d-flex flex-column mb-8 fv-row">
            <!--begin::Label-->
            <label class="d-flex align-items-center fs-6 fw-semibold mb-2">
              <span class="required">Description</span>
              <span
                class="ms-1"
                data-bs-toggle="tooltip"
                title="Enter detailed description"
              >
                <i class="ki-duotone ki-information-5 text-gray-500 fs-6">
                  <span class="path1"></span>
                  <span class="path2"></span>
                  <span class="path3"></span>
                </i>
              </span>
            </label>
            <!--end::Label-->
            {% render_field form.description class="form-control form-control-solid" %}
          </div>
          <!--end::Input group-->

          <!--begin::Actions-->
          <div class="text-center">
             <button type="reset" id="new_upload_cancel" class="btn btn-light me-3">Reset</button>
            <button
              type="submit"
              id="upload_submit"
              name="upload_submit"
              class="btn btn-primary"
            >
              <span class="indicator-label">Submit</span>
              
            </button>
          </div>
          <!--end::Actions-->
    
                    
            </div>
                </div>
              
              
            </div>
            <!--end::Card body-->
          </div>
          <!--end::Card-->
        </form>
        <!--end::Form-->
      </div>
      <!--end::Content-->
      <!--begin::Sidebar-->
      <div class="flex-column flex-lg-row-auto w-100 w-lg-250px w-xl-300px mb-10 order-1 order-lg-2" >
        <!--begin::Card-->
        <div
          class="card card-flush pt-3 mb-0"
          data-kt-sticky="true"
          data-kt-sticky-name="subscription-summary"
          data-kt-sticky-offset="{default: false, lg: '200px'}"
          data-kt-sticky-width="{lg: '250px', xl: '300px'}"
          data-kt-sticky-left="auto"
          data-kt-sticky-top="150px"
          data-kt-sticky-animation="false"
          data-kt-sticky-zindex="95"
          
        >
          <!--begin::Card header-->
          <div class="card-header">
            <!--begin::Card title-->
            <div class="card-title">
              <h2>Menu</h2>
            </div>
            <!--end::Card title-->
          </div>
          <!--end::Card header-->
          <!--begin::Card body-->
          <div class="card-body pt-0 fs-6">
            <!--begin::Seperator-->
            <div class="separator separator-dashed mb-7"></div>
            <!--end::Seperator-->
            <!--begin::Section-->
            <div class="mb-10">
              <!--begin::Title-->
             
              <!--end::Title-->
              <!--begin::Details-->
              <div class="mb-0">
               
                <div class="fw-semibold text-gray-600 d-flex align-items-center"
                >
                <div class="mb-0"></div>
                <a href="#" class="btn btn-primary fw-semibold px-6 py-3" data-bs-toggle="modal" data-bs-target="#new_prompt">+ Add New Prompt</a>
              </div>
             <!-- Loop through prompts and display edit and delete buttons -->
                {% for prompt in prompts %}
                <div>
                    <p>{{ prompt.prompt_data }}</p>
                    <!-- Edit Button -->
                    <!-- Edit Link -->
                <a href="#"  data-bs-toggle="modal" data-bs-target="#editPromptModal{{ prompt.id }}">
                  Edit <i class="fa fa-edit" style="color: blue;"></i> 
                </a>

                <!-- Delete Link -->
                <a href="#" data-bs-toggle="modal" data-bs-target="#deletePromptModal{{ prompt.id }}">
                  Delete <i class="fa fa-trash" style="color: red"></i> 
                </a>

                </div>

                <!-- Edit Prompt Modal -->
                <div class="modal fade" id="editPromptModal{{ prompt.id }}" tabindex="-1" aria-labelledby="editPromptModal{{ prompt.id }}Label" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <!-- Modal Header -->
                            <div class="modal-header">
                                <h5 class="modal-title" id="editPromptModal{{ prompt.id }}Label">Edit Prompt</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <!-- Modal Body -->
                            <div class="modal-body">
                                <!-- Add form fields here for editing prompt -->
                                <!-- For example: -->
                                <form method="post" action="{% url 'edit_prompt' prompt.id %}">
                                    {% csrf_token %}
                                    <label for="prompt_data">Prompt Data:</label>
                                    <textarea id="prompt_data" name="prompt_data" class="form-control" placeholder="Enter description up to 150 characters">{{ prompt.prompt_data }}</textarea>
                                    <button type="submit" class="btn btn-primary mt-3">Update</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Delete Prompt Modal -->
                <div class="modal fade" id="deletePromptModal{{ prompt.id }}" tabindex="-1" aria-labelledby="deletePromptModal{{ prompt.id }}Label" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <!-- Modal Header -->
                            <div class="modal-header">
                                <h5 class="modal-title" id="deletePromptModal{{ prompt.id }}Label">Delete Prompt</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <!-- Modal Body -->
                            <div class="modal-body">
                                <p>Are you sure you want to delete this prompt?</p>
                                <p>{{ prompt.prompt_data }}</p>
                                <form method="post" action="{% url 'delete_prompt' prompt.id %}">
                                    {% csrf_token %}
                                    <button type="submit" class="btn btn-danger">Delete</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}

                </div>
              </div>
              <!--end::Details-->
            </div>
            <!--end::Section-->
          
          </div>
          <!--end::Card body-->
        </div>
        <!--end::Card-->
      </div>
      <!--end::Sidebar-->
    </div>
    <!--end::Layout-->
   
  </div>
  <!--end::Post-->
</div>


</div>





<div class="modal fade" id="new_prompt" tabindex="-1" aria-hidden="true" style="display: none;">
  <!--begin::Modal dialog-->
  <div class="modal-dialog modal-dialog-centered mw-600px">
    <!--begin::Modal content-->
    <div class="modal-content modal-rounded">
      <!--begin::Modal header-->
      <div class="modal-header py-7 d-flex justify-content-between">
        <!--begin::Modal title-->
        <h2>Add new prompt</h2>
        <!--end::Modal title-->
        <!--begin::Close-->
        <div class="btn btn-sm btn-icon btn-active-color-primary" data-bs-dismiss="modal">
          <i class="ki-duotone ki-cross fs-1">
            <span class="path1"></span>
            <span class="path2"></span>
          </i>
        </div>
        <!--end::Close-->
      </div>
      <!--begin::Modal header-->
      <div class="modal-body py-lg-10 px-lg-10">      
        
          <!--begin::Aside-->
          
          <!--begin::Aside-->
          <!--begin::Content-->
          <div class="flex-row-fluid py-lg-5 px-lg-15">
            <!--begin::Form-->
            <form action="{% url 'edit_doc' doc.id %}" method="post">
            
              <!--begin::Step 1-->
              <div class="current" data-kt-stepper-element="content">
                <div class="w-100">
                  <!--begin::Input group-->
                  <div class="fv-row mb-10 fv-plugins-icon-container">
                    <!--begin::Label-->
                    <label class="d-flex align-items-center fs-5 fw-semibold mb-2">
                      <span class="required">Prompt</span>
                      <span class="ms-1" data-bs-toggle="tooltip" aria-label="Specify your unique app name" data-bs-original-title="Specify your unique app name" data-kt-initialized="1">
                        <i class="ki-duotone ki-information-5 text-gray-500 fs-6">
                          <span class="path1"></span>
                          <span class="path2"></span>
                          <span class="path3"></span>
                        </i>
                      </span>
                    </label>
                    <!--end::Label-->
                    <!--begin::Input-->
                    {% csrf_token %}
                    <div class="form-group">
                      <!-- {{ prompt_form.as_p }} -->
                      {% render_field prompt_form.prompt_data class='form-control input_field' placeholder="Enter description upto 150 characters" %}
                    </div>
                                       
                    <!--end::Input-->
                  <div class="fv-plugins-message-container fv-plugins-message-container--enabled invalid-feedback"></div></div>
                  <!--end::Input group-->
                 
                </div>
              </div>                           
              
              <button type="submit" id="prompt_submit" name="prompt_submit" class="btn btn-primary">Add New Prompt</button>
            </form>
            <!--end::Form-->
          </div>
          <!--end::Content-->
        </div>
       
        <!--end::Stepper-->
      </div>
    </div>
    

</div>

{% include 'admin/common/footer.html' %}
